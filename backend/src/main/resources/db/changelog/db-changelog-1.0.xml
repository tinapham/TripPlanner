<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">
    <changeSet id="create_type" author="anhquynhpham">
        <createTable tableName="type">
            <column name="id" type="int" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name" type="varchar(100)">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <sql dbms="postgresql"
             splitStatements="true"
             stripComments="true">
            insert into type(name) values ('Park');
            insert into type(name) values ('Tourist Attraction');
            insert into type(name) values ('Bridge');
            insert into type(name) values ('Buddhist Temple');
            insert into type(name) values ('Lake');
            insert into type(name) values ('Heritage Preservation');
            insert into type(name) values ('Restaurant');
            insert into type(name) values ('Market');
            insert into type(name) values ('Souvenir');
            insert into type(name) values ('Coffee');
            insert into type(name) values ('Spa/Wellness');
            insert into type(name) values ('Bar/Pub');
        </sql>
    </changeSet>


    <changeSet id="create_user" author="anhquynhpham">
        <createTable tableName="users">
            <column name="id" type="int" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="email" type="varchar(100)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="password" type="varchar(100)">
                <constraints nullable="false"/>
            </column>
            <column name="is_admin" type="boolean" defaultValueNumeric="false">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <insert tableName="users">
            <column name="email">admin</column>
            <column name="password">240be518fabd2724ddb6f04eeb1da5967448d7e831c08c8fa822809f74c720a9
            </column> <!--admin123-->
        </insert>

        <insert tableName="users">
            <column name="email">alice</column>
            <column name="password">8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92
            </column> <!--123456-->
        </insert>

        <insert tableName="users">
            <column name="email">trace</column>
            <column name="password">8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92
            </column> <!--123456-->
        </insert>

        <update tableName="users">
            <column name="is_admin" value="true"/>
            <where>email='admin'</where>
        </update>
    </changeSet>

    <changeSet id="create_attraction" author="anhquynhpham">
        <createTable tableName="attractions">
            <column name="id" type="int" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name" type="varchar(100)">
                <constraints nullable="false"/>
            </column>
            <column name="address" type="varchar(100)">
                <constraints nullable="false"/>
            </column>
            <column name="lat" type="float">
                <constraints nullable="false"/>
            </column>
            <column name="lng" type="float">
                <constraints nullable="false"/>
            </column>

            <column name="type_id" type="integer"/>

            <column name="description" type="text"/>
        </createTable>

        <addForeignKeyConstraint baseColumnNames="type_id"
                                 baseTableName="attractions"
                                 constraintName="type_fk"
                                 onDelete="CASCADE"
                                 onUpdate="CASCADE"
                                 referencedColumnNames="id"
                                 referencedTableName="type"/>

        <sql dbms="postgresql"
             splitStatements="true"
             stripComments="true">
            insert into attractions(name, address, lat, lng, type_id, description) values ('29/3 park',
            '33 Điện Biên Phủ, Thạch Gián, Da Nang', 16.065548, 108.204486, '1',
            'Spacious city memorial park featuring hiking trails, paths, landscaped valleys and a lake.');

            insert into attractions(name, address, lat, lng, type_id, description) values ('Ban Co Peak',
            'Thọ Quang, Sơn Trà, Đà Nẵng', 16.118949, 108.271949, '2', '');

            insert into attractions(name, address, lat, lng, type_id, description) values ('Asia Park',
            '1 Phan Đăng Lưu, Hoà Cường Bắc, Hải Châu, Đà Nẵng', 16.039258, 108.228534, '1',
            '- Open time: Monday to Sunday: 15:00 – 22:00
            *Sun Group – one of Asia’s Premier Real Estate developers – has chosen the resort town of Da Nang, on Vietnam’s central coast to develop an original amusement and culture park named Sun World Danang Wonder (Asia Park).
            *The Amusement Park of Sun World Danang Wonder (Asia Park) brings together a complete package of rides, attractions, shows, restaurants and retail to allow for a wonderful evening out. Popular attractions such as four roller coasters, several attractions for children as well as high speed thrill rides are available and a Monorail encircles the park area.
            *The Cultural park allows guests to enjoy the historical architecture, performing arts and wonderful cuisines of ten Asian countries including Japan, Indonesia, Singapore, South Korea, India, Nepal, Thailand, Cambodia, China and Vietnam. Each country is represented with fascinating landscaped gardens, as well as interpretations of historic or natural landmarks.
            ');

            insert into attractions(name, address, lat, lng, type_id, description) values ('Dragon Bridge',
            'Nguyễn Văn Linh, An Hải Trung, Đà Nẵng', 16.061210, 108.226976, '3',
            'The Dragon Bridge is a bridge with a dragon over the Han River at Da Nang, Vietnam. Dragon Bridge is 666m long, 37.5m wide and has six lanes for traffic.It opened to traffic on March 29, 2013, at a cost of nearly 1.5 trillion VND.
            *Main span was completed on October 26, 2011. The bridge was opened to traffic on March 29, 2013, the 38th anniversary of the liberation of Da Nang City. This modern bridge crosses the Han River at the Le Dinh Duong/Bach Dang traffic circle, providing the shortest road link from the Da Nang International Airport to other main roads in Da Nang City, and a more direct route to My Khe Beach and Non Nuoc Beach on the eastern edge of the City. The bridge was designed and built in the shape of a dragon and to breathe fire and water.
            *Fire and Water Breathing The dragon on the bridge can breathe fire in 2 minutes with 3 minutes of water breathing after, making it an incredible highlight in Danang City. The water is sprayed out in a powerful blast reflecting the aspiration of Danang City. Fire and Water Performance: At 9.pm every weekends and holidays.
            *With the lights changing, the bridge turns to many color. And with the lights reflections of the river water, the view is spectacular. During the show, no vehicle can go across the bridge, so if you want to take motobike there, you must go ealier. You can book the cruise boat ticket, enjoy beauty of Han river, then they will take you to the dock near the dragon’s head. Check carrefully that they do take you there.');

            insert into attractions(name, address, lat, lng, type_id, description) values ('Non Nuoc Pagoda',
            '98 Huyền Trân Công Chúa, Hòa Hải, Ngũ Hành Sơn, Đà Nẵng', 16.004199, 108.264244, '4', '');

            insert into attractions(name, address, lat, lng, type_id, description) values ('The Marble Mountains',
            '52 Huyền Trân Công Chúa, Hoà Hải, Ngũ Hành Sơn, Đà Nẵng', 16.003922, 108.262854, '2',
            'Network of 5 marble mountains with multiple caves, elaborate temples and viewing outlooks.
            *Kim Son (mountain of metal), Moc Son (Mountain of Wood), Thuy Son (Mountain of Water), Hoa Son (Mountain of Fire), and Tho Son (Mountain of Earth). Marble Mountains have attractive sights such as Da Chong tunnel, Ba Tho Cave, Hades Cave, Huyen Khong Cave, Linh Ung Pagoda, Vong Giang Tower, etc., which is suitable for spiritual tourism. At the feet of the mountains, there is a village of marble sculptural arts over 300 years of age. It is the place for tourists to see with their own eyes the stone sculptural arts of talent craftsmen, and tourists can choose their most favourite products as souvenirs.
            *- Open time: 07:00 – 17:30 on weekdays.
            *- Best time 07:00 – 10:00; 14:30 – 17:30
            *- Price range: 1.00 USD
            *- Tips: At the foot of the mountain is a village of art sculpture. You can buy stoneware products, jewelry, etc. as souvenirs and observe the artisans creating products.');

            insert into attractions(name, address, lat, lng, type_id, description) values ('Hoa Trung Lake',
            'Hòa Vang, Da Nang', 16.079906, 108.055420, '5', '');

            insert into attractions(name, address, lat, lng, type_id, description) values ('Son Tra Banyan Tree',
            'Thọ Quang, Sơn Trà, Đà Nẵng', 16.122540, 108.331703, '6',
            '800 year old banyan tree');

            insert into attractions(name, address, lat, lng, type_id, description) values ('Linh Ung Pagoda',
            'Hoàng Sa, Thọ Quang, Sơn Trà, Đà Nẵng', 16.100288, 108.277856, '4',
            'Linh Ung pagoda is the largest pagoda of scale and artistic architecture. It is so famous for the huge statue of Lady Buddha – 67m high.
            *Linh Ung – Bai But pagoda features perfect harmony between the modern and traditional architectures of Vietnamese pagodas, especially in the three-entrance gate, the main chamber and the ancestors’ house.
            *On the way to see Linh Ung pagoda, you will pass a giant 3 doors gate, then you will surprise how spectacular it is. Just behind the entrance gate, there is a lovely courtyard with different kind of bonsai trees and 18 statues of aghast showing their expression. It is such a good place for your photos.
            *- There are many steps to the gate, so if you don’t want to walk a lot, it is better that you ask the driver to stop at the hilltop parking.
            *- You should see it at night, when it is cooler and the incredible view of all the lights of the city.
            *- You need bring good camera and tripod to capture the beautiful sights. Taking panoramic photos here is great idea.');

            insert into attractions(name, address, lat, lng, type_id, description) values ('Sun World Ba Na Hills',
            'Hòa Vang, Đà Nẵng', 15.997735, 107.988077, '2',
            '25 km to the southwest of Da Nang at an altitude of 1,487m, Sun World Ba Na Hills are considered as “One temperate place in the tropical forest” because the climate is cool all the year round and you can enjoy four seasons within a single day.
            *In addition, Ba Na cable cars hold two Guinness World Records: the world’s longest single cable car system (5,042.62 m long) and the world highest gap between its departure and arrival station (1,291.81 m high). A series of four star hotel with 137 rooms and standard restaurants which can serve every demand of tourists.
            *- Tel: (+84)236.3791999 or (+84)236.3791791.
            *- Website: www.banahills.com.vn
            *- Ticket prices:
            *Adult: 700.000vnđ
            *Children: 600.000vnđ (1m-1,3m)
            *
            *Price for Danang resident with condition (*) :
            *Adult: 400.000vnđ
            *Children: 300.000vnđ (1m-1,3m) ');

            insert into attractions(name, address, lat, lng, type_id, description) values ('Than Tai Hot Springs Park',
            'QL14G, Hoà Phú, Hòa Vang, Đà Nẵng', 15.967851, 108.019805, '2',
            'Located in Ba Na Nui Chua nature reserve, Phu Tuc village, Hoa Phu commune, Hoa Vang district, Da Nang city. Nui Than Tai Hot Spring Park can be said is a masterpiece that the nature has endowed the capital of Central Vietnam
            *- Open time: 7h00 – 22h00
            *- Best time: 15h00 – 19h00
            *- Visit duration: 4 hours
            *- What to explore: Long Huyet Lake, Mineral Water Wall sightseeing area, Long Tien Cave, Son Than Temple, God of Wealth Than Tai Statue, Hot Springs bath, etc.');
        </sql>
    </changeSet>


    <changeSet id="create_plan" author="anhquynhpham">
        <createTable tableName="plans">
            <column name="id" type="int" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name" type="varchar(100)">
                <constraints nullable="false"/>
            </column>
            <column name="start_day" type="varchar(10)"/>
            <column name="end_day" type="varchar(10)"/>
            <column name="user_id" type="int" defaultValueNumeric="1">
                <constraints nullable="false"/>
            </column>
            <column name="payment_token" type="text"/>
        </createTable>

        <addForeignKeyConstraint baseColumnNames="user_id"
                                 baseTableName="plans"
                                 constraintName="plan_fk"
                                 onDelete="CASCADE"
                                 onUpdate="CASCADE"
                                 referencedColumnNames="id"
                                 referencedTableName="users"/>

        <sql dbms="postgresql"
             splitStatements="true"
             stripComments="true">
            insert into plans(name, start_day, end_day, user_id, payment_token) values ('Summer trip', '2018-04-01',
                            '2018-04-02', 2, '568fa31fa6e97a89');
            insert into plans(name, start_day, end_day, user_id, payment_token) values ('30-4 Holiday', '2018-04-30',
                            '2018-04-30', 3, '55dea043474e18b3');
        </sql>
    </changeSet>

    <changeSet id="create_event" author="anhquynhpham">
        <createTable tableName="events">
            <column name="id" type="int" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="start_time" type="varchar(50)"/>
            <column name="end_time" type="varchar(50)"/>
            <column name="attraction_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="plan_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addForeignKeyConstraint baseColumnNames="plan_id"
                                 baseTableName="events"
                                 constraintName="plan_fkey"
                                 onDelete="CASCADE"
                                 onUpdate="CASCADE"
                                 referencedColumnNames="id"
                                 referencedTableName="plans"/>

        <addForeignKeyConstraint baseColumnNames="attraction_id"
                                 baseTableName="events"
                                 constraintName="attraction_fkey"
                                 onDelete="CASCADE"
                                 onUpdate="CASCADE"
                                 referencedColumnNames="id"
                                 referencedTableName="attractions"/>

        <sql>
            insert into events(start_time, end_time, attraction_id, plan_id) values ('2018-04-01 7:00',
            '2018-04-01 9:30', 2, 1);
            insert into events(start_time, end_time, attraction_id, plan_id) values ('2018-04-01 9:30',
            '2018-04-01 10:30', 8, 1);
            insert into events(start_time, end_time, attraction_id, plan_id) values ('2018-04-01 10:30',
            '2018-04-01 14:00', 9, 1);
            insert into events(start_time, end_time, attraction_id, plan_id) values ('2018-04-02 9:00',
            '2018-04-02 16:00', 10, 1);
            insert into events(start_time, end_time, attraction_id, plan_id) values ('2018-04-30 8:00',
            '2018-04-02 9:30', 6, 2);
            insert into events(start_time, end_time, attraction_id, plan_id) values ('2018-04-30 9:30',
            '2018-04-02 12:00', 5, 2);
            insert into events(start_time, end_time, attraction_id, plan_id) values ('2018-04-30 16:00',
            '2018-04-02 21:30', 3, 2);
        </sql>

    </changeSet>

    <changeSet id="tag-1.0" author="anhquynhpham">
        <tagDatabase tag="1.0"/>
    </changeSet>

</databaseChangeLog>